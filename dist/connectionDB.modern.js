const{Pool:t,Client:o}=require("pg"),{configDB:n}=require("./configDB");module.exports=class{constructor(i){"Client"===i?(this.typeConnection="Client",this.connection=new o({user:n.dbUser,host:n.dbHost,database:n.dbName,password:n.dbPassword,port:n.dbPort,"statement_timeout?":n.statement_timeout,"query_timeout?":n.query_timeout,"connectionTimeoutMillis?":n.connectionTimeoutMillis}),this.connection.connect()):(this.typeConnection="Pool",this.connection=new t({user:n.dbUser,host:n.dbHost,database:n.dbName,password:n.dbPassword,port:n.dbPort,"statement_timeout?":n.statement_timeout,"query_timeout?":n.query_timeout,"connectionTimeoutMillis?":n.connectionTimeoutMillis}))}getConnection(){return this.connection}async closeConnection(){this.connection&&await this.connection.end()}async beginTransaction(){if("Client"!==this.typeConnection)throw"No es valida iniciar trasacction sobre tipo de conneccion Pool";await this.connection.query("BEGIN")}async commitTransaction(){if("Client"!==this.typeConnection)throw"No es valida iniciar trasacction sobre tipo de conneccion Pool";await this.connection.query("COMMIT")}async rollBackTransaction(){if("Client"!==this.typeConnection)throw"No es valida iniciar trasacction sobre tipo de conneccion Pool";await this.connection.query("ROLLBACK")}};
//# sourceMappingURL=connectionDB.modern.js.map
