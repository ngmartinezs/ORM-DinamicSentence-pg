function e(e,n){try{var r=e()}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}var n=require("./connectionDB"),r=function(e,n){return"select query_id,\n                   proposito,\n                    sql_sentence\n            from "+e+"."+n+"\n    where query_id = $1"};module.exports=function(t,o,u,c,i){try{var s,f=function(e){return s?e:{CODIGO_RETORNO:6,MENSAJE_RETORNO:"No se logro emsamblar el query",DATA:{}}},l=[],h=t,a=null;t||(a=new n,h=a.getConnection());var m=function(n,t){try{var f=e(function(){if(o&&u&&c&&i)return Promise.resolve(function(n,t,o,u){try{return Promise.resolve(e(function(){var e={name:"fetch-query-template",text:r(t,o),values:[u]};return Promise.resolve(n.query(e)).then(function(e){return e.rows[0]})},function(e){throw e}))}catch(e){return Promise.reject(e)}}(h,o,u,c)).then(function(e){return e&&e.sql_sentence&&Object.getOwnPropertyNames(i).forEach(function(e,n,r){i[e]&&l.push(i[e])}),function(){if(l.length>0)return Promise.resolve(h.query({name:"fetch-sql-"+c,text:e.sql_sentence,values:l})).then(function(e){if(e)return s=1,{CODIGO_RETORNO:0,MENSAJE_RETORNO:"OK",DATA:e.rows}})}()})},function(e){throw e})}catch(e){return t(!0,e)}return f&&f.then?f.then(t.bind(null,!1),t.bind(null,!0)):t(!1,f)}(0,function(e,n){function r(){if(e)throw n;return n}var t=function(){if(a)return Promise.resolve(a.closeConnection()).then(function(){})}();return t&&t.then?t.then(r):r()});return Promise.resolve(m&&m.then?m.then(f):f(m))}catch(e){return Promise.reject(e)}};
//# sourceMappingURL=dinamicQuery.js.map
